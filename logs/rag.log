2025-09-18 23:32:09,014 - rag - INFO - Received request to generate RAG template
2025-09-18 23:32:09,015 - rag - INFO - Request data: {'ingestion': {'source_type': 'local', 'file_types': ['pdf', 'docx'], 'recursive': True, 'encoding': 'utf-8', 'chunking': {'method': 'fixed', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'include': ['file_name', 'file_type', 'page_number', 'created_date']}, 'embeddings': {'model': 'text-embedding-ada-002', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'uri': 'https://mysearch.windows.net', 'index_name': 'my_index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': 'Answer based on context: {context}\nQuestion: {question}', 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}, 'orchestration': {'llm_provider': 'azure_openai', 'llm_model': 'gpt-4', 'temperature': 0.2, 'max_tokens': 1024, 'api_key': 'AZURE_API_KEY'}}
2025-09-18 23:32:09,020 - rag - INFO - Zip file created
2025-10-03 02:08:40,182 - rag - INFO - Received request to generate RAG template
2025-10-03 02:08:40,182 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.UPLOAD: 'upload'>, 'file_types': ['pdf', 'docx'], 'sharepoint': None, 'chunking': {'method': 'fixed', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}]}, 'embeddings': {'model': 'text-embedding-ada-002', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'my_index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': 'Answer based on context: {context}\nQuestion: {question}', 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:08:40,182 - rag - INFO - Files received: 0
2025-10-03 02:08:40,182 - rag - ERROR - Error generating template: Files are required when source_type is 'upload' or 'both'
2025-10-03 02:08:50,899 - rag - INFO - Received request to generate RAG template
2025-10-03 02:08:50,900 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.UPLOAD: 'upload'>, 'file_types': ['pdf', 'docx'], 'sharepoint': None, 'chunking': {'method': 'fixed', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}]}, 'embeddings': {'model': 'text-embedding-ada-002', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'my_index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': 'Answer based on context: {context}\nQuestion: {question}', 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:08:50,900 - rag - INFO - Files received: 1
2025-10-03 02:08:50,922 - rag - INFO - Added sample file: Letter.pdf
2025-10-03 02:08:50,925 - rag - INFO - Zip file created successfully
2025-10-03 02:31:30,928 - rag - INFO - Received request to generate RAG template
2025-10-03 02:31:30,928 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.UPLOAD: 'upload'>, 'file_types': ['pdf', 'docx'], 'sharepoint': None, 'chunking': {'method': 'fixed', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}]}, 'embeddings': {'model': 'text-embedding-ada-002', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'my_index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': 'Answer based on context: {context}\nQuestion: {question}', 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:31:30,928 - rag - INFO - Files received: 1
2025-10-03 02:31:30,949 - rag - ERROR - Error generating template: 'config' is undefined
2025-10-03 02:31:38,928 - rag - INFO - Received request to generate RAG template
2025-10-03 02:31:38,928 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.UPLOAD: 'upload'>, 'file_types': ['pdf', 'docx'], 'sharepoint': None, 'chunking': {'method': 'fixed', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}]}, 'embeddings': {'model': 'text-embedding-ada-002', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'my_index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': 'Answer based on context: {context}\nQuestion: {question}', 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:31:38,928 - rag - INFO - Files received: 1
2025-10-03 02:31:38,949 - rag - ERROR - Error generating template: 'config' is undefined
2025-10-03 02:32:23,872 - rag - INFO - Received request to generate RAG template
2025-10-03 02:32:23,874 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.BOTH: 'both'>, 'file_types': ['pdf', 'docx', 'txt', 'png', 'jpeg'], 'sharepoint': {'site_url': 'https://yourtenant.sharepoint.com/sites/yoursite', 'tenant_id': 'your-tenant-id', 'client_id': 'your-client-id', 'client_secret': 'your-client-secret', 'folder_path': 'Documents', 'recursive': True}, 'chunking': {'method': 'hybrid', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}, {'name': 'document_type', 'type': <FieldType.STRING: 'string'>, 'description': 'Type of document', 'auto_extract': False, 'default_value': 'general', 'required': False}]}, 'embeddings': {'model': 'text-embedding-3-small', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'rag-index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': "Based on the following context, please answer the question accurately and concisely. If the context doesn't contain enough information, please say so.\n\nContext: {context}\n\nQuestion: {question}\n\nAnswer:", 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:32:23,874 - rag - INFO - Files received: 1
2025-10-03 02:32:23,899 - rag - ERROR - Error generating template: 'config' is undefined
2025-10-03 02:32:28,538 - rag - INFO - Received request to generate RAG template
2025-10-03 02:32:28,538 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.BOTH: 'both'>, 'file_types': ['pdf', 'docx', 'txt', 'png', 'jpeg'], 'sharepoint': {'site_url': 'https://yourtenant.sharepoint.com/sites/yoursite', 'tenant_id': 'your-tenant-id', 'client_id': 'your-client-id', 'client_secret': 'your-client-secret', 'folder_path': 'Documents', 'recursive': True}, 'chunking': {'method': 'hybrid', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}, {'name': 'document_type', 'type': <FieldType.STRING: 'string'>, 'description': 'Type of document', 'auto_extract': False, 'default_value': 'general', 'required': False}]}, 'embeddings': {'model': 'text-embedding-3-small', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'rag-index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': "Based on the following context, please answer the question accurately and concisely. If the context doesn't contain enough information, please say so.\n\nContext: {context}\n\nQuestion: {question}\n\nAnswer:", 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:32:28,538 - rag - INFO - Files received: 1
2025-10-03 02:32:28,562 - rag - ERROR - Error generating template: 'config' is undefined
2025-10-03 02:32:57,690 - rag - INFO - Received request to generate RAG template
2025-10-03 02:32:57,690 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.BOTH: 'both'>, 'file_types': ['pdf', 'docx', 'txt', 'png', 'jpeg'], 'sharepoint': {'site_url': 'https://yourtenant.sharepoint.com/sites/yoursite', 'tenant_id': 'your-tenant-id', 'client_id': 'your-client-id', 'client_secret': 'your-client-secret', 'folder_path': 'Documents', 'recursive': True}, 'chunking': {'method': 'hybrid', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}, {'name': 'document_type', 'type': <FieldType.STRING: 'string'>, 'description': 'Type of document', 'auto_extract': False, 'default_value': 'general', 'required': False}]}, 'embeddings': {'model': 'text-embedding-3-small', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'rag-index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': "Based on the following context, please answer the question accurately and concisely. If the context doesn't contain enough information, please say so.\n\nContext: {context}\n\nQuestion: {question}\n\nAnswer:", 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:32:57,690 - rag - INFO - Files received: 1
2025-10-03 02:32:57,711 - rag - ERROR - Error generating template: 'config' is undefined
2025-10-03 02:36:21,254 - rag - INFO - Received request to generate RAG template
2025-10-03 02:36:21,254 - rag - INFO - Configuration parsed: {'ingestion': {'source_type': <DocumentSourceType.BOTH: 'both'>, 'file_types': ['pdf', 'docx', 'txt', 'png', 'jpeg'], 'sharepoint': {'site_url': 'https://yourtenant.sharepoint.com/sites/yoursite', 'tenant_id': 'your-tenant-id', 'client_id': 'your-client-id', 'client_secret': 'your-client-secret', 'folder_path': 'Documents', 'recursive': True}, 'chunking': {'method': 'hybrid', 'chunk_size': 512, 'overlap': 50}, 'metadata': {'fields': [{'name': 'title', 'type': <FieldType.STRING: 'string'>, 'description': 'Document title', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'page', 'type': <FieldType.INTEGER: 'integer'>, 'description': 'Page number', 'auto_extract': True, 'default_value': None, 'required': False}, {'name': 'content', 'type': <FieldType.STRING: 'string'>, 'description': 'Document content', 'auto_extract': True, 'default_value': None, 'required': True}, {'name': 'content_vector', 'type': <FieldType.LIST: 'list'>, 'description': 'Content vector embeddings', 'auto_extract': False, 'default_value': None, 'required': False}, {'name': 'document_type', 'type': <FieldType.STRING: 'string'>, 'description': 'Type of document', 'auto_extract': False, 'default_value': 'general', 'required': False}]}, 'embeddings': {'model': 'text-embedding-3-small', 'dimension': 1536}}, 'vector_db': {'type': 'azure_search', 'index_name': 'rag-index', 'distance_metric': 'cosine', 'dynamic_fields': True}, 'query': {'retrieval_type': 'semantic', 'top_k': 5, 'filters': {'file_type': 'pdf'}, 'reranker': 'bm25', 'prompt_template': "Based on the following context, please answer the question accurately and concisely. If the context doesn't contain enough information, please say so.\n\nContext: {context}\n\nQuestion: {question}\n\nAnswer:", 'context_window': 2048, 'answer_style': 'detailed'}, 'extraction': {'schema': [{'field': 'invoice_number', 'type': 'string', 'description': None}, {'field': 'amount', 'type': 'float', 'description': None}], 'granularity': 'document', 'output_format': 'json'}}
2025-10-03 02:36:21,254 - rag - INFO - Files received: 1
2025-10-03 02:36:21,280 - rag - INFO - Added sample file: Letter.pdf
2025-10-03 02:36:21,284 - rag - INFO - Zip file created successfully
